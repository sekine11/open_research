<div class="row m-4">
	<div class="col-2 list-group">
		<% Protocol.all.tags_on(:protocols).each do |tag| %>
			<%= link_to protocols_path(:tag => tag.name), class: "list-group-item list-group-item-action" do %>
				<%= tag.name %> <span class="badge badge-pill badge-danger"><%= Protocol.all.tagged_with(tag).count %></span>
			<% end %>
		<% end %>
	</div>
	<div class="col-7">
		<main class="">
			<% @protocols.each do |protocol| %>
				<div class="border-top border-bottom p-3 row">
					<h3 class="col-12 h5 mb-1 font-weight-bold"><%= link_to protocol.subject.truncate(30), protocol_path(protocol), class: "text-body link" %></h3>
					<div class="col-12 mb-1">
						<% protocol.protocol_counts.each do |tag| %>
							<span class="badge badge-pill badge-danger mx-1"><%= tag.name %></span>
						<% end %>
					</div>
					<div class="col-12">
						<div class="row">
							<span class="col-12 col-md-6 text-dark">投稿者：<%= protocol.user.public_name %></span>
							<span class="col-12 col-md-6 text-dark">お気に入り数：<%= protocol.protocol_favorites.count %></span>
						</div>
					</div>
				</div>
			<% end %>
		</main>
	</div>
	<div class="col-3">
		<table class="table">
			<thead class="bg-danger">
				<tr>
					<th class="text-center text-light" colspan="2">人気のプロトコール</th>
				</tr>
			</thead>
			<tbody>
				<% i = 1 %>
				<% @rank_protocols.first(10).each do |protocol| %>
					<tr>
						<th><%= i %></th>
						<td><%= protocol.subject.truncate(15) %></td>
					</tr>
					<% i += 1 %>
				<% end %>
			</tbody>
		</table>
	</div>
	<div class="pagination justify-content-center my-4 col-12">
		<%= paginate @protocols, class: "" %>
	</div>
</div>
